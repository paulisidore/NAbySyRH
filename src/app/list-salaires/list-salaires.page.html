<ion-header>
  <ion-toolbar>
    <ion-button fill="clear" slot="start" color="dark" (click)="_openSideNav()">
      <ion-icon slot="icon-only" name="menu"> </ion-icon>
    </ion-button>
    <ion-title>salaires</ion-title>
  </ion-toolbar>

    <!-- Segment -->
  <ion-toolbar color="tertiary">
    <ion-segment [(ngModel)]="selectedSegment">
          <ion-segment-button [value]="item" *ngFor="let item of segmentList;let i = index"
              (click)="_segmentSelected(item,i)">
              <ion-label class="segment-text">{{item}}</ion-label>
          </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

</ion-header>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-slides mode="ios" pager="ios" scrollbar="ios" #slide (ionSlideDidChange)="_ionSlideDidChange($event)">

    <!-- Paiement de Ssalaire -->
    <ion-slide value="0">
      <div class="stats-container" style="height:100%; width:100%;">
        <div class="ion-justify-content-center">

          <ion-grid  class="ion-grid-user">
            <ion-row class="ion-justify-content-center" class="ion-row-user">
              <ion-col size="12"size-sm="6" size-md="4" size-lg="4" size-xl="4" class="ion-justify-content-center" style="border: 5px solid rgb(16, 248, 66);">
                <ion-item>
                  <ion-label>Choisir un Salarié</ion-label>

                  <ionic-selectable #selectComponent [(ngModel)]="selected" itemValueField="ID"
                  itemTextField="searchString" [items]="users" headerColor="primary" [canSearch]="true"
                  searchFailText=" Rien n'a été trouvé:("  [canClear]="true"
                  >
                  <!-- ****************************** -->
                  <ng-template ionicSelectableCloseButtonTemplate color="danger">
                    <ion-button fill="clear" color="danger">
                      <ion-icon  name="close-circle"></ion-icon>
                    </ion-button>

                  </ng-template>

                  <ng-template ionicSelectableItemTemplate let-user="item">
                    {{user.Prenom +' '+ user.Nom +' TEL:'+user.Tel+' '+user.Fonction }}
                  </ng-template>
                  <!-- ******************************** -->
                  <ng-template ionicSelectableFooterTemplate>
                    <ion-toolbar>
                      <ion-row>
                        <ion-col size="4">
                          <ion-button expand="full" (click)="clear()">
                            Annuler
                          </ion-button>
                        </ion-col >
                        <ion-col  size="4">
                          <ion-button expand="full" (click)="toggleItems()" [disabled]="!selectComponent.itemsToConfirm.length">
                            Décocher
                          </ion-button>
                        </ion-col>
                        <ion-col size="4">
                          <ion-button expand="full" (click)="confirm()" [disabled]="!selectComponent.itemsToConfirm.length">
                            Confirmer
                          </ion-button>
                        </ion-col>
                      </ion-row>
                    </ion-toolbar>
                  </ng-template>
                </ionic-selectable>
                </ion-item>
                <!-- Date -->
                <ion-item id="open-modal">
                  <!-- <ion-icon icon="calendar-outline" slot="start" color="primary"></ion-icon> -->
                  <ion-label>Période</ion-label>
                  <ion-text tappable slot="end">{{ formattedString| date: 'MMMM, YYYY' }}</ion-text>
                  <ion-icon icon="calendar-outline" slot="end" color="primary" tappable></ion-icon>
                </ion-item>

                <ion-modal trigger="open-modal" mode="md">
                  <ng-template>
                    <ion-content>
                      <ion-datetime
                        #datetime
                        [value]="dateValue" size="cover"
                        (ionChange)="dateChanged(datetime.value)"
                        (ionCancel)="showPicker=false;">
                      </ion-datetime >
                        <ion-row>
                          <ion-col size="4"><ion-button (click)="close()" color="danger" class="dismiss">Dismiss</ion-button></ion-col>
                          <ion-col size="4"></ion-col>
                          <ion-col size="4"><ion-button (click)="select()" color="primary" expand="full">Choisir</ion-button></ion-col>
                        </ion-row>



                    </ion-content>
                  </ng-template>
                </ion-modal>
                <!-- <p>{{selectedMonth+' '+selectedDate}}</p> -->
                <div *ngIf="selected">
                  <ion-chip color="primary">{{  formattedString| date: 'MMMM'}}</ion-chip>
                  <ion-chip color="secondary" >{{selectedDate}}</ion-chip>
                  <ion-button expand="block" color="success" shape="round"(click)="userdetails(selected)"style="margin-bottom:10px; margin-top:10px;"> Voir </ion-button>
                  <ion-button expand="block" color="success" shape="round"style="margin-bottom:10px;" (click)="avanceSalaire(listeSalaire)"> Avance </ion-button>
                  <ion-button expand="block"  (click)="doRefresh($event)"style="margin-bottom:10px;"> rafraîchir </ion-button>
                  <ion-button expand="block" (click)="bulletinBulkEdit()" style="margin-bottom:10px;">Afficher Bulletin</ion-button>
                  <ion-button expand="block" (click)="downloadPdf()">Imprimer Bulletin</ion-button>
                  <ion-item>
                    <ion-label>
                      <ion-text >PRENOM & NOM</ion-text>
                      <h3><ion-text color="dark" style="font-weight: bold;">{{selected.Prenom+' '}}{{selected.Nom}}</ion-text></h3>
                    </ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-label>
                      <ion-text >SALAIRE NET</ion-text>
                      <p><ion-text color="dark" style="font-weight: bold;">{{this.listeSalaire.BULLETIN_SALAIRE.SALAIRE_NET+'  FCFA'}} </ion-text></p>
                    </ion-label>
                  </ion-item>
                  <ion-button expand="block" (click)="payerSalaire(this.listeSalaire)">Payer salaire</ion-button>
                </div>
              </ion-col>
              <ion-col size="12" size-sm="6" size-md="4" size-lg="4" size-xl="4" class="ion-justify-content-center"*ngIf="selected" style="margin-top: 0;">
                <ion-card>
                  <!-- <img src="../assets/man.png" alt="" > -->
                  <img [src]=" selected.PHOTO_URL " alt="" style="height: 300px; margin-top: 10px;" >

                  <ion-card-header>
                    <ion-card-title>{{selected.Prenom +' '+ selected.Nom}}</ion-card-title>
                    <ion-card-subtitle>{{selected.Fonction}}</ion-card-subtitle>
                  </ion-card-header>

                  <ion-card-content>
                    <ion-label>
                      {{'Adresse: '+selected.Adresse }}
                    </ion-label><br>
                    <ion-label>{{selected.DIRECTION}}</ion-label><br>
                    <ion-label>{{selected.SERVICE}}</ion-label>
                  </ion-card-content>
                </ion-card>
              </ion-col>

              <ion-col size="12" size-sm="6" size-md="4" size-lg="3" size-xl="2" class="ion-justify-content-center" *ngIf="selected">
                <!-- <ion-card>
                    <ion-card-content>
                    </ion-card-content>
                  </ion-card> -->

              </ion-col>

              <ion-col size="12" size-sm="6" size-md="4" size-lg="3" size-xl="2" class="ion-justify-content-center">

                  <!-- <ion-button (click)="goToPrint(selected)" >Imprimer Bulletin</ion-button> -->

              </ion-col>
            </ion-row>
          </ion-grid>

    </div>

    <ion-card >
      <ion-card-content>

      </ion-card-content>
    </ion-card>
    <!-- Bulletin de salaire -->
    <div *ngIf="selected">
      <div *ngIf="bulkEdit">

        <ion-row class="ion-row1" >
          <ion-col size="3" ><ion-text ><h1 class="firm">{{this.listeSalaire.BULLETIN_SALAIRE.NOM_ENTREPRISE}}</h1> </ion-text></ion-col>
          <ion-col size="6">
            <ion-text ><h1> <strong>Adresse:</strong>{{' '+this.listeSalaire.BULLETIN_SALAIRE.ADR_ENTREPRISE}}</h1></ion-text>
            <ion-text ><h1> <strong>Téléphone:</strong> {{' '+this.listeSalaire.BULLETIN_SALAIRE.TEL_ENTREPRISE}}</h1></ion-text>
            <ion-text ><h1> <strong>Fax:</strong>{{' '+this.listeSalaire.BULLETIN_SALAIRE.CONTACT_ENTREPRISE}}</h1></ion-text>
            <ion-text ><h1> <strong>Email:</strong>{{' '+this.listeSalaire.BULLETIN_SALAIRE.EMAIL_ENTREPRISE}}</h1></ion-text>
            </ion-col>
          <ion-col size="3"><ion-text><h1 class="firm2" >BULLETIN DE PAIE</h1></ion-text></ion-col>
        </ion-row >
        <ion-row class="ion-row2">
          <ion-col size="3"><ion-text ><h3>CONVENTION COLLECTIVE</h3></ion-text></ion-col>
          <ion-col size="6"><ion-text ><h2>PRENOM & NOM</h2></ion-text></ion-col>
          <ion-col size="3"><ion-text ><h3>ADRESSE</h3></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row3">
          <ion-col size="3"><ion-text ><h1>{{qualifiquation}}</h1></ion-text></ion-col>
          <ion-col size="6"><ion-text ><h1 class="name">{{this.prenom+' '+this.nom}}</h1></ion-text></ion-col>
          <ion-col size="3"><ion-text ><h1>{{adresse}}</h1></ion-text></ion-col>
        </ion-row>
        <ion-row  class="ion-row4">
          <ion-col size="12"></ion-col>
        </ion-row>
        <ion-row class="ion-row5">
          <ion-col size="3"><ion-text><h2>QUALIFICATION</h2></ion-text> </ion-col>
          <ion-col size="1"><ion-text><P>N° D'ORDRE</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>CATEGORIE</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>SITUATION FAMILIALE</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>PART TRIMF</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>PART IRPP</P></ion-text></ion-col>
          <ion-col size="2"><ion-text><P>PERIODE DE PAIE</P></ion-text></ion-col>
          <ion-col size="2"><ion-text><P>DATE D'EMBAUCHE</P></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row6">
          <ion-col size="3"><ion-text><h1>{{qualifiquation}}</h1></ion-text> </ion-col>
          <ion-col size="1"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>{{categorie}}</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>{{situationFa}}</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>{{partTrimf}}</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>{{partIrpp}}</P></ion-text></ion-col>
          <ion-col size="2"><ion-text><P>{{periodePaie}}</P></ion-text></ion-col>
          <ion-col size="2"><ion-text><P>{{dateEmbauche}}</P></ion-text></ion-col>
        </ion-row>
        <ion-row  class="ion-row7">
          <ion-col size="8.8" class="rubrique"></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <!-- <ion-col size="3"><ion-text><p>COTISATIONS PATRONALES</p></ion-text> </ion-col> -->
          <ion-col size="3" class="rubrique2" ><ion-text><h3>COTISATIONS PATRONALES</h3></ion-text> </ion-col>
        </ion-row>
        <ion-row class="ion-row8">
          <ion-col size="3" class="rubrique"><ion-text><h3>LIBELLE RUBRIQUE</h3></ion-text> </ion-col>
          <ion-col size="1.9" class="rubrique"><ion-text><P>BASE</P></ion-text></ion-col>
          <ion-col size="1" class="rubrique"><ion-text><P>TAUX</P></ion-text></ion-col>
          <ion-col size="1.5" class="rubrique"><ion-text><P>GAINS</P></ion-text></ion-col>
          <ion-col size="1.4" class="rubrique"><ion-text><P>RETENUES</P></ion-text></ion-col>
          <ion-col size="0.1"class="separation"></ion-col>
          <ion-col size="1" class="rubrique"><div><ion-text><P>TAUX</P></ion-text></div></ion-col>
          <ion-col size="2" class="rubrique"><ion-text><P>MONTANT</P></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row9" *ngFor="let bulletin of gainPrime">
          <ion-col size="3"><ion-text><h3>{{bulletin.Libelle}}</h3></ion-text> </ion-col>
          <ion-col size="1.9"><ion-text><P>{{bulletin.Base}}</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>{{bulletin.Taux}}</P></ion-text></ion-col>
          <ion-col size="1.5"><ion-text><P>{{bulletin.Gain}}</P></ion-text></ion-col>
          <ion-col size="1.4"><ion-text><P>{{bulletin.Retenu}}</P></ion-text></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <ion-col size="1"><ion-text><P>{{bulletin.COTISATION_PATRONALE_TAUX}}</P></ion-text></ion-col>
          <ion-col size="2"><ion-text><P>{{bulletin.COTISATION_PATRONALE_MONTANT}}</P></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row10">
          <ion-col size="3" class="rubrique"><ion-text><h3>**Salaire Brut** (1)</h3></ion-text> </ion-col>
          <ion-col size="1.9"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.5"class="rubrique"><ion-text><P>{{this.salaireBrut}}</P></ion-text></ion-col>
          <ion-col size="1.4"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <ion-col size="1" class="rubrique"><div><ion-text><P></P></ion-text></div></ion-col>
          <ion-col size="2"class="rubrique"><ion-text><P></P></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row11" *ngFor="let bulletin of ligneCotisation">
          <ion-col size="3"><ion-text><h3>{{bulletin.Libelle}}</h3></ion-text> </ion-col>
          <ion-col size="1.9"><ion-text><P>{{bulletin.Base}}</P></ion-text></ion-col>
          <ion-col size="1"><ion-text><P>{{bulletin.Taux}}</P></ion-text></ion-col>
          <ion-col size="1.5"><ion-text><P>{{bulletin.Gain}}</P></ion-text></ion-col>
          <ion-col size="1.4"><ion-text><P>{{bulletin.Retenu}}</P></ion-text></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <ion-col size="1"><ion-text><P>{{bulletin.COTISATION_PATRONALE_TAUX}}</P></ion-text></ion-col>
          <ion-col size="2"><ion-text><P>{{bulletin.COTISATION_PATRONALE_MONTANT}}</P></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row14">
          <ion-col size="3" class="rubrique"><ion-text><h3>Total Cotisation Patronale</h3></ion-text> </ion-col>
          <ion-col size="1.9"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.5"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.4"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <ion-col size="1" class="rubrique2"><div><ion-text><P></P></ion-text></div></ion-col>
          <ion-col size="2"class="rubrique3"><ion-text><h3>{{this.listeSalaire.BULLETIN_SALAIRE.TOTAL_COTISATION_PATRONALE}}</h3></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row12">
          <ion-col size="3" class="rubrique"><ion-text><h3>**Total des retenues** (2)</h3></ion-text> </ion-col>
          <ion-col size="1.9"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.5"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.4"class="rubrique"><ion-text><h3>{{this.listeSalaire.BULLETIN_SALAIRE.TOTAL_RETENU}}</h3></ion-text></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <ion-col size="1" class="rubrique2"><div><ion-text><P></P></ion-text></div></ion-col>
          <ion-col size="2"class="rubrique3"><ion-text><h3></h3></ion-text></ion-col>
        </ion-row>
        <ion-row class="ion-row13">
          <ion-col size="3" class="rubrique"><ion-text><h3>**Salaire Net** (3) = (1) - (2)</h3></ion-text> </ion-col>
          <ion-col size="1.9"class="rubrique"><ion-text><h3>{{this.listeSalaire.BULLETIN_SALAIRE.SALAIRE_NET}}</h3></ion-text></ion-col>
          <ion-col size="1"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.5"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="1.4"class="rubrique"><ion-text><P></P></ion-text></ion-col>
          <ion-col size="0.1" class="separation"></ion-col>
          <ion-col size="1" class="rubrique2"><div><ion-text><P></P></ion-text></div></ion-col>
          <ion-col size="2"class="rubrique3"><ion-text><h3></h3></ion-text></ion-col>
        </ion-row>
      </div>
    </div>

      </div>
    </ion-slide>

    <!-- Historique des paiements-->
    <ion-slide value="1">
      <div class="history-container">
        <!-- En-tête avec titre -->
        <div class="history-header">
          <h1 class="history-title">
            <ion-icon name="time-outline"></ion-icon>
            Historique des Paiements
          </h1>
        </div>

        <!-- Carte de recherche -->
        <ion-card class="search-card">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="search-outline"></ion-icon>
              Critères de Recherche
            </ion-card-title>
          </ion-card-header>
          
          <ion-card-content>
            <ion-grid>
              <ion-row>
                <!-- Date de départ -->
                <ion-col size="12" size-md="4">
                  <ion-item lines="none" class="date-picker-item" id="open-modal2">
                    <ion-label position="stacked">Date de départ</ion-label>
                    <div class="date-display">
                      <ion-icon name="calendar-outline" color="primary"></ion-icon>
                      <ion-text>{{ formattedString2 | date: 'dd MMMM yyyy' }}</ion-text>
                    </div>
                  </ion-item>

                  <ion-modal trigger="open-modal2" mode="md">
                    <ng-template>
                      <ion-content>
                        <ion-datetime
                          #datetime
                          [value]="dateValue2"
                          size="cover"
                          (ionChange)="dateChangedHistory(datetime.value)"
                          (ionCancel)="showPicker=false"
                        ></ion-datetime>
                        <ion-toolbar>
                          <ion-buttons slot="start">
                            <ion-button (click)="close_H()" color="danger">
                              <ion-icon slot="start" name="close-circle"></ion-icon>
                              Fermer
                            </ion-button>
                          </ion-buttons>
                          <ion-buttons slot="end">
                            <ion-button (click)="effacedateDebut()" color="warning">
                              <ion-icon slot="start" name="trash"></ion-icon>
                              Effacer
                            </ion-button>
                            <ion-button (click)="select_H()" color="primary">
                              <ion-icon slot="start" name="checkmark"></ion-icon>
                              Valider
                            </ion-button>
                          </ion-buttons>
                        </ion-toolbar>
                      </ion-content>
                    </ng-template>
                  </ion-modal>
                </ion-col>

                <!-- Date de fin -->
                <ion-col size="12" size-md="4">
                  <ion-item lines="none" class="date-picker-item" id="open-modal3">
                    <ion-label position="stacked">Date de fin</ion-label>
                    <div class="date-display">
                      <ion-icon name="calendar-outline" color="primary"></ion-icon>
                      <ion-text>{{ formattedString3 }}</ion-text>
                    </div>
                  </ion-item>

                  <ion-modal trigger="open-modal3" mode="md">
                    <ng-template>
                      <ion-content>
                        <ion-datetime
                          #datetime
                          [value]="dateValue3"
                          size="cover"
                          (ionChange)="dateChangedHistoryEnd(datetime.value)"
                          (ionCancel)="showPicker=false"
                        ></ion-datetime>
                        <ion-toolbar>
                          <ion-buttons slot="start">
                            <ion-button (click)="close_H()" color="danger">
                              <ion-icon slot="start" name="close-circle"></ion-icon>
                              Fermer
                            </ion-button>
                          </ion-buttons>
                          <ion-buttons slot="end">
                            <ion-button (click)="effacedateFin()" color="warning">
                              <ion-icon slot="start" name="trash"></ion-icon>
                              Effacer
                            </ion-button>
                            <ion-button (click)="select_H()" color="primary">
                              <ion-icon slot="start" name="checkmark"></ion-icon>
                              Valider
                            </ion-button>
                          </ion-buttons>
                        </ion-toolbar>
                      </ion-content>
                    </ng-template>
                  </ion-modal>
                </ion-col>

                <!-- Sélection employé -->
                <ion-col size="12" size-md="4">
                  <ion-item lines="none" class="employee-select-item">
                    <ion-label position="stacked">Employé</ion-label>
                    <ionic-selectable
                      #selectComponent2
                      [(ngModel)]="selected_H"
                      itemValueField="ID"
                      itemTextField="searchString"
                      [items]="users"
                      headerColor="primary"
                      [canSearch]="true"
                      searchFailText="Rien n'a été trouvé"
                      [canClear]="true"
                      placeholder="Tous les employés"
                    >
                      <ng-template ionicSelectableCloseButtonTemplate color="danger">
                        <ion-button fill="clear" color="danger">
                          <ion-icon name="close-circle"></ion-icon>
                        </ion-button>
                      </ng-template>

                      <ng-template ionicSelectableItemTemplate let-user="item">
                        {{ user.Prenom + ' ' + user.Nom + ': ' + user.Tel + ' ' + user.Fonction }}
                      </ng-template>

                      <ng-template ionicSelectableFooterTemplate>
                        <ion-toolbar>
                          <ion-buttons slot="start">
                            <ion-button (click)="clear_H()">Annuler</ion-button>
                          </ion-buttons>
                          <ion-buttons slot="end">
                            <ion-button (click)="toggleItems_H()" [disabled]="!selectComponent2.itemsToConfirm.length">
                              Décocher
                            </ion-button>
                            <ion-button (click)="confirm_H()" [disabled]="!selectComponent2.itemsToConfirm.length">
                              Confirmer
                            </ion-button>
                          </ion-buttons>
                        </ion-toolbar>
                      </ng-template>
                    </ionic-selectable>
                  </ion-item>
                </ion-col>
              </ion-row>

              <!-- Bouton de recherche -->
              <ion-row>
                <ion-col class="ion-text-center">
                  <ion-button
                    (click)="loadHistorySalary()"
                    color="primary"
                    class="search-button"
                    size="large"
                  >
                    <ion-icon slot="start" name="search"></ion-icon>
                    Rechercher
                  </ion-button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>

        <!-- Résultats de recherche -->
        <div class="results-section" *ngIf="historySalaire && historySalaire.length > 0">
          <div class="results-header">
            <h3>
              <ion-icon name="document-text-outline"></ion-icon>
              {{ historySalaire.length }} paiement(s) trouvé(s)
            </h3>
          </div>

          <!-- Liste des paiements -->
          <ion-card *ngFor="let item of historySalaire" class="payment-card">
            <!-- En-tête de la carte -->
            <ion-card-header>
              <div class="card-header-content">
                <div class="employee-info">
                  <div class="employee-name">
                    <ion-icon name="person-circle" color="primary"></ion-icon>
                    <h2>{{ item.Prenom + ' ' + item.Nom }}</h2>
                  </div>
                  <ion-badge color="medium">ID: {{ item.IdEmploye }}</ion-badge>
                </div>
                <div class="payment-info">
                  <div class="amount">
                    <ion-text color="success">{{ item.TotalVers | currency:'XOF':'symbol':'1.0-0' }}</ion-text>
                  </div>
                  <div class="date">
                    <ion-icon name="calendar-outline"></ion-icon>
                    <span>{{ item.DatePaie }}</span>
                  </div>
                </div>
              </div>
            </ion-card-header>

            <!-- Contenu détaillé -->
            <ion-card-content>
              <ion-accordion-group>
                <ion-accordion value="details">
                  <ion-item slot="header" lines="none" class="accordion-header">
                    <ion-label>
                      <strong>Détails du paiement</strong>
                      <p>N° {{ item.ID }}</p>
                    </ion-label>
                  </ion-item>

                  <div slot="content" class="accordion-content">
                    <ion-grid>
                      <ion-row>
                        <!-- Colonne 1 -->
                        <ion-col size="12" size-md="6">
                          <div class="detail-item">
                            <ion-icon name="person-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Nom complet</label>
                              <p>{{ item.Prenom + ' ' + item.Nom }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="male-female-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Sexe</label>
                              <p>{{ item.Sexe }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="people-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Situation familiale</label>
                              <p>{{ item.Situation_Famille }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="briefcase-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Fonction</label>
                              <p>{{ item.Fonction }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="calendar-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Date et heure de paie</label>
                              <p>{{ item.DatePaie }} à {{ item.HeurePaie }}</p>
                            </div>
                          </div>
                        </ion-col>

                        <!-- Colonne 2 -->
                        <ion-col size="12" size-md="6">
                          <div class="detail-item">
                            <ion-icon name="card-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Matricule</label>
                              <p>{{ item.IdEmploye }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="calendar-number-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Période</label>
                              <p>{{ item.IdMois | date:'MMMM' }} {{ item.Annee | date:'yyyy' }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="wallet-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Mode de paiement</label>
                              <p>{{ item.TextModePaiement || item.ModePaiement }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="cash-outline" color="medium"></ion-icon>
                            <div class="detail-content">
                              <label>Avance reçue</label>
                              <p>{{ item.IsAvance === '1' ? 'OUI' : 'NON' }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="trending-down-outline" color="warning"></ion-icon>
                            <div class="detail-content">
                              <label>Avance précédente</label>
                              <p>{{ item.TotalAvancePrec | currency:'XOF':'symbol':'1.0-0' }}</p>
                            </div>
                          </div>

                          <div class="detail-item">
                            <ion-icon name="trending-up-outline" color="success"></ion-icon>
                            <div class="detail-content">
                              <label>Avance suivante</label>
                              <p>{{ item.TotalAvanceSuiv | currency:'XOF':'symbol':'1.0-0' }}</p>
                            </div>
                          </div>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </div>
                </ion-accordion>
              </ion-accordion-group>
            </ion-card-content>

            <!-- Actions -->
            <ion-card-content class="card-actions">
              <ion-button
                fill="outline"
                color="primary"
                (click)="editHistorique(item)"
                class="action-button"
              >
                <ion-icon slot="start" name="create-outline"></ion-icon>
                Modifier
              </ion-button>

              <ion-button
                fill="outline"
                color="danger"
                (click)="deleteHistorique(item)"
                class="action-button"
              >
                <ion-icon slot="start" name="trash-outline"></ion-icon>
                Supprimer
              </ion-button>
            </ion-card-content>
          </ion-card>
        </div>

        <!-- Message si aucun résultat -->
        <ion-card *ngIf="historySalaire && historySalaire.length === 0" class="empty-state">
          <ion-card-content>
            <ion-icon name="document-text-outline" color="medium"></ion-icon>
            <h3>Aucun paiement trouvé</h3>
            <p>Modifiez vos critères de recherche et réessayez</p>
          </ion-card-content>
        </ion-card>
      </div>
    </ion-slide>

    <!-- Liste des Demandes d'Avance-->
     <ion-slide value="2">
      <app-historique-avance></app-historique-avance>
     </ion-slide>
     
    <!-- <ion-slide value="2">
      <div>
          <ion-label>3rd Segment</ion-label>
      </div>
    </ion-slide>
    <ion-slide value="3">
      <div>
          <ion-label>3rd Segment</ion-label>
      </div>
    </ion-slide> -->

  </ion-slides>



</ion-content>
